---
- name: Install npm
  apt:
    name: npm
    state: latest
  become: true 
  #become_user: "{{ username | default('vagrant')}}"
  tags: web, dependency

# - name: Install gobuster 
#   apt: 
#     name: gobuster
#     state: latest
#   become: true
#   #become_user: "{{ username | default('vagrant')}}"
#   tags: web

# - name: Install wfuzz
#   community.general.pipx:
#     name: wfuzz
#     state: latest
#   #become: true
#   become_user: "{{ username | default('vagrant')}}"
#   tags: web

- name: Add Insomnia to Apt
  shell: curl -1sLf 'https://packages.konghq.com/public/insomnia/setup.deb.sh' | sudo -E distro=ubuntu codename=focal bash

- name: Install Insomnia
  apt:
    name: insomnia 
    update_cache: true
  state: present
  become: true
  tags: web, api

- name: Installing kube-hunter Tool
  community.general.pipx:
    name: kube-hunter
  #become: true
  become_user: "{{ username | default('vagrant')}}"
  tags:
    - docker
    - web
